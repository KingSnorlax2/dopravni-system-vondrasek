generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Auto {
  id          Int      @id @default(autoincrement())
  spz         String   @unique
  znacka      String
  model       String
  rokVyroby   Int
  najezd      Int
  stav        String
  poznamka    String?
  datumSTK    DateTime?
  fotky       Fotka[]  @relation("AutoFotky")
  poznatky    Note[]   @relation("AutoNotes")
  transakce   Transakce[] @relation("AutoTransakce")
}

model Fotka {
  id        String   @id @default(cuid())
  data      String   @db.Text
  mimeType  String
  autoId    Int?
  auto      Auto?    @relation("AutoFotky", fields: [autoId], references: [id], onDelete: Cascade)
}

model Note {
  id        Int      @id @default(autoincrement())
  text      String
  auto      Auto     @relation("AutoNotes", fields: [autoId], references: [id], onDelete: Cascade)
  autoId    Int
  createdAt DateTime @default(now())
}

model Transakce {
  id      Int      @id @default(autoincrement())
  autoId  Int?
  castka  Float
  datum   DateTime
  typ     String
  popis   String 
  nazev   String?
  auto    Auto?    @relation("AutoTransakce", fields: [autoId], references: [id])
}